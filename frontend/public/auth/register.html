<!DOCTYPE html>
<html>
<head><title>Register</title></head>
<body>

<h2>Register</h2>
<input id="email" />
<input id="password" type="password" />
<select id="role">
  <option value="client">Client</option>
  <option value="cleaner">Cleaner</option>
</select>
<button onclick="register()">Create Account</button>

<script type="module">
import { supabase } from '/supabase.js'

window.register = async () => {
  const { data, error } = await supabase.auth.signUp({
    email: email.value,
    password: password.value
  })

  if (error) return alert(error.message)

  await supabase.from('profiles').insert({
    id: data.user.id,
    role: role.value
  })

  alert('Account created. Login now.')
  location.href = '/auth/login.html'
}
</script>

</body>
</html>
